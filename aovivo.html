<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<meta name="author" content="Aurelio Jargas">
<META NAME="generator" CONTENT="http://txt2tags.org">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="http://aurelio.net/include/clean-2012/base.css">
<LINK REL="stylesheet" TYPE="text/css" HREF="http://aurelio.net/include/clean-2012/article.css">
<LINK REL="stylesheet" TYPE="text/css" HREF="_site.css">
<TITLE>ZZ Ao Vivo — Os bastidores do desenvolvimento das Funções ZZ</TITLE>
<link rel="shortcut icon" href="/img/favicon.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</HEAD>
<BODY id="aovivo">

<DIV ID="header">
<H1>ZZ Ao Vivo — Os bastidores do desenvolvimento das Funções ZZ</H1>
</DIV>

<DIV ID="main">
<div class="menu">
<P>
<A HREF="/">$HOME</A>
</P>

<OL>
<LI>/run
  <UL>
  <LI><A HREF="/online/">online</A>
  <LI><A HREF="download.html">download</A>
  </UL>
<LI>/doc
  <UL>
  <LI><A HREF="list.html">zz*</A>
  <LI><A HREF="man.html">man</A>
  <LI><A HREF="faq.html">FAQ</A>
  <LI><A HREF="changelog.html">changelog</A>
  <LI><A HREF="hist.html">13 anos!</A>
  </UL>
<LI>/dev
  <UL>
  <LI><A HREF="https://github.com/funcoeszz/funcoeszz">GitHub</A>
  <LI><A HREF="my.html">sua ZZ</A>
  <LI><A HREF="logo.html">logo</A>
  <LI><A HREF="donate.html">doações</A>
  <LI><A HREF="thanks.html">valeu!</A>
  </UL>
<LI>/chat
  <UL>
  <LI><A HREF="https://github.com/funcoeszz/funcoeszz/issues">bugs</A>
  <LI><A HREF="https://github.com/funcoeszz/funcoeszz/issues/new">ideias</A>
  <LI><A HREF="http://br.groups.yahoo.com/group/zztabtab/">fórum</A>
  <LI><A HREF="http://twitter.com/oreio">@oreio</A>
  </UL>
</OL>

</div><div id="content">
<P>
Aqui estão os trechos da conversa que os desenvolvedores das Funções ZZ tiveram <B>enquanto</B> programavam a versão nova, numa solitária noite de 2006.
</P>
<P>
Distantes centenas de quilômetros e comunicando-se pela Internet, dois desenvolvedores trabalharam no mesmo código ao mesmo tempo, durante horas. Os segredos dos bastidores do desenvolvimento de um software livre feito a quatro mãos, pela primeira vez desvendados :)
</P>

<UL>
<LI>13 de Novembro de 2006, segunda-feira.
<LI><A HREF="http://aurelio.net">Aurelio</A> em Matinhos (PR),
  <A HREF="http://thobias.org">Thobias</A> em Porto Alegre (RS).
<LI>Das 18h30 às 02h10, quase oito horas de programação intensa.
<LI>Console aberto em terminais de fundo preto, janela do Skype ao lado.
<LI>Codifica no Vim, testa na linha de comando, escreve no Skype.
<LI>Sintonia e sincronia.
</UL>

<P>
As funções já estavam há mais de um ano sem atualizações, então havia
muito a arrumar. Sites que mudaram de endereço, páginas que mudaram de
formato e problemas encontrados pelos usuários. Mais de 20 funções
quebradas.
</P>
<P>
Além do tempo a ser investido, é preciso estar inspirado para
encarar uma faxina dessa magnitude. A segunda-feira dia 13 tinha algo
de especial, deu certo de estarmos com tempo e vontade.
</P>
	<BLOCKQUOTE>
	Em meu blog publiquei a
	"<A HREF="http://blog.aurelio.net/2006/11/14/zz-ao-vivo-um-concerto-de-1010-dedos/">versão poética</A>"
	desta história.
	</BLOCKQUOTE>
<DIV CLASS="toc">

      <UL>
      <LI><A HREF="#toc1">O início</A>
      <LI><A HREF="#toc2">A situação atual</A>
      <LI><A HREF="#toc3">A longa lista de problemas a arrumar</A>
      <LI><A HREF="#toc4">Os trabalhos começam</A>
      <LI><A HREF="#toc5">Definindo prioridades</A>
      <LI><A HREF="#toc6">Primeiro aplicamos as correções mandadas pelos usuários</A>
      <LI><A HREF="#toc7">Pings e ACKs para evitar trabalho duplicado</A>
      <LI><A HREF="#toc8">Páginas somem, infelizmente</A>
      <LI><A HREF="#toc9">A decisão de fazer uma cópia dos dados para não perder novamente</A>
      <LI><A HREF="#toc10">A luta com a zzloteria começou às 19h30</A>
      <LI><A HREF="#toc11">A decisão de aposentar uma função</A>
      <LI><A HREF="#toc12">Agora é a vez da luta com a zzletrademusica</A>
      <LI><A HREF="#toc13">As mudanças são passadas ao vivo e já aplicadas nos fontes</A>
      <LI><A HREF="#toc14">A decisão de deixar como está: quebrada</A>
      <LI><A HREF="#toc15">Além dos problemas normais, o Skype também nos deu trabalho</A>
      <LI><A HREF="#toc16">Uma parcial do que foi feito até agora em cinco horas de trabalho</A>
      <LI><A HREF="#toc17">Páginas mudam, padrões mudam, as ZZ mudam</A>
      <LI><A HREF="#toc18">Mas padrões novos também podem facilitar nossa vida</A>
      <LI><A HREF="#toc19">E virou a meia-noite...</A>
      <LI><A HREF="#toc20">RSS zipado? Putz, mais um problema para a coleção...</A>
      <LI><A HREF="#toc21">Mais um exemplo de patches "ao vivo"</A>
      <LI><A HREF="#toc22">Acha que o ritmo já está forte? Veja agora então:</A>
      <LI><A HREF="#toc23">Ops, única trombada da noite, mas que acabou bem</A>
      <LI><A HREF="#toc24">Compatibilidade é importante (e difícil, e chato, e …)</A>
      <LI><A HREF="#toc25">Google é legal, mas o HTML deles…</A>
      <LI><A HREF="#toc26">Já que chegamos até aqui, uma função nova seria legal</A>
      <LI><A HREF="#toc27">A escolha do nome é muito importante</A>
      <LI><A HREF="#toc28">Ufa! Anotou a placa daquele trem?</A>
      <LI><A HREF="#toc29">Análise do problema e das possíveis soluções</A>
      <LI><A HREF="#toc30">A tomada de decisão e implementação</A>
      <LI><A HREF="#toc31">Quase oito horas depois… finalmente terminou</A>
      <LI><A HREF="#toc32">Minutos depois…</A>
      </UL>

</DIV>

<H3 ID="toc1"><a href="#toc1">O início</a></H3>

<UL>
<LI><span class="a">18:28 Aurelio:</span> zz?
<LI><span class="t">18:28 Thobias:</span> vamos? por mim ok. vou ficar por casa hoje mesmo...
</UL>

<H3 ID="toc2"><a href="#toc2">A situação atual</a></H3>

<UL>
<LI><span class="a">18:41 Aurelio:</span> então vamo, tou rodando o testador
<LI><span class="t">18:42 Thobias:</span> blz, vou começar a testar algumas. vamos fazer uma lista do que está quebrado...
<LI><span class="a">18:42 Aurelio:</span> tem algumas que o pessoal já arrumou, lá na lista
<LI><span class="a">18:45 Aurelio:</span> caralho, quebradeira total
<LI><span class="t">18:45 Thobias:</span> aham
<LI><span class="a">18:47 Aurelio:</span> 11 e a contagem continua...
<LI><span class="a">18:47 Aurelio:</span> vamos fazer um troço light, não precisa arrumar tudo :)
<LI><span class="t">18:48 Thobias:</span> é, vai dar muito trabalho arrumar tudo hehe
<LI><span class="a">18:51 Aurelio:</span> 19 zzs quebradas tá bom pra você? :)
<LI><span class="t">18:52 Thobias:</span> peguei mais algumas quebradas aqui
<LI><span class="a">18:52 Aurelio:</span> ultima versão de set-2005. até que não quebrou taaaaanto assim pra mais de um ano
</UL>

<H3 ID="toc3"><a href="#toc3">A longa lista de problemas a arrumar</a></H3>

<UL>
<LI><span class="a">19:00 Aurelio:</span> listagem atualizada:
    <br>dicabl (404)
    <br>dicportugues (null)
    <br>sigla (filtro)
    <br>dolar (filtro)
    <br>dicasl (URL)
    <br>dominiopais (tirar //I)
    <br>detranpr (null)
    <br>chavepgp (URL)
    <br>zzcep (null)
    <br>noticiaslinux (viva o linux(null), info exame(null), underlinux(null), noticias linux(BSD?))
    <br>noticiassec (linux security)
    <br>linuxnews (slashdot(filtro), os news(null))
    <br>pronuncia (ver alternativa ao comando play no mac)
    <br>google (filtro)
    <br>howto (null)
    <br>zztv (null)
    <br>letrasdemusica (null)
    <br>whoisbr (Alert!: This client does not contain support for HTTPS URLs.)
    <br>locale (null - BSD?)
    <br>security (cl9(filtro), cl10(filtro), mandriva(null), gentoo(filtro)
    <br>ipinternet (null)
    <br>loteria (filtro)
</UL>

<H3 ID="toc4"><a href="#toc4">Os trabalhos começam</a></H3>

<UL>
<LI><span class="a">19:00 Aurelio:</span> ah, deixa ver a portugues aqui
<LI><span class="a">19:01 Aurelio:</span> aqui nao funciona mesmo, deve ser BSDzisse
<LI><span class="a">19:01 Aurelio:</span> ah, achei, o sed tem OU \|
</UL>

<H3 ID="toc5"><a href="#toc5">Definindo prioridades</a></H3>

<UL>
<LI><span class="a">19:08 Aurelio:</span> vi o mail da nomefoto
<LI><span class="a">19:09 Aurelio:</span> tem que investigar e corrigir. deixar pra mais tarde essa :)
<LI><span class="t">19:10 Thobias:</span> blz
<LI><span class="a">19:11 Aurelio:</span> ou se quiser pegar essa agora, eu vejo as da lista
<LI><span class="t">19:14 Thobias:</span> tem muita coisa quebrada... vamos focar nas simpes primeiro... diminuir esse número...
</UL>

<H3 ID="toc6"><a href="#toc6">Primeiro aplicamos as correções mandadas pelos usuários</a></H3>

<UL>
<LI><span class="a">19:14 Aurelio:</span> tou na abl
<LI><span class="t">19:15 Thobias:</span> ok, dessas quais tem patch na lista?
<LI><span class="a">19:15 Aurelio:</span> tem que ver, a 1a que vi foi a abl e fui pra ela
<LI><span class="a">19:16 Aurelio:</span> voce nao tem as msgs da lista ai?
<LI><span class="t">19:16 Thobias:</span> blz, vou começar de baixo
<LI><span class="t">19:16 Thobias:</span> tenho
<LI><span class="a">19:16 Aurelio:</span> ok, avisa qual voce pegar
<LI><span class="a">19:17 Aurelio:</span> ah, lembra de anotar o nome completo do cara pra por nos agradecimentos
</UL>

<H3 ID="toc7"><a href="#toc7">Pings e ACKs para evitar trabalho duplicado</a></H3>

<UL>
<LI><span class="a">19:26 Aurelio:</span> dicabl OK, vou pra loteria
<LI><span class="t">19:32 Thobias:</span> blz, peguei a ipinternet
<LI><span class="t">19:34 Thobias:</span> ipinternet OK. vou para security
<LI><span class="a">19:39 Aurelio:</span> massa
<LI><span class="t">19:53 Thobias:</span> security ok. vou para locale
<LI><span class="a">19:53 Aurelio:</span> loteria dando um baile
</UL>

<H3 ID="toc8"><a href="#toc8">Páginas somem, infelizmente</a></H3>

<UL>
<LI><span class="t">20:00 Thobias:</span> a locale não existe mais aquela página..
<LI><span class="a">20:00 Aurelio:</span> putz, deu trabalho pra achar
<LI><span class="t">20:01 Thobias:</span> pois é. tinhamos que ter pegado o html e colocado no site das zz consultado de la...
<LI><span class="a">20:01 Aurelio:</span> cache do google?
</UL>

<H3 ID="toc9"><a href="#toc9">A decisão de fazer uma cópia dos dados para não perder novamente</a></H3>

<UL>
<LI><span class="t">20:44 Thobias:</span> to procurando um site com locales. achei esse aqui <A HREF="http://docs.hp.com/en/5990-8560/apa.html">http://docs.hp.com/en/5990-8560/apa.html</A>
<LI><span class="a">20:45 Aurelio:</span> opa, hp.com é quente
<LI><span class="t">20:46 Thobias:</span> mas o html é muito xunxo e o dump nao fica direito. fazer o filtro direto vai ser bem chato
<LI><span class="t">20:46 Thobias:</span> tava pensando em pegar isso e criar um arquivo para zz e colocar no site
<LI><span class="t">20:46 Thobias:</span> ?!
<LI><span class="a">20:47 Aurelio:</span> por mim beleza
<LI><span class="t">20:47 Thobias:</span> ok
<LI><span class="a">20:47 Aurelio:</span> isso não sofre atualizações, né?
<LI><span class="t">20:48 Thobias:</span> nao sei. mas deve sofrer poucas eu acho
<LI><span class="t">20:48 Thobias:</span> e aquela nossa outra fonte era um site pessoal de um cara, enfim....
<LI><span class="a">20:48 Aurelio:</span> fazemos o nosso e foda-se
<LI><span class="t">20:48 Thobias:</span> ok
<LI><span class="t">20:50 Thobias:</span> tu te lembra como era a saida do zzlocale antes?
<LI><span class="a">20:51 Aurelio:</span> não tenho :/
<LI><span class="a">20:51 Aurelio:</span> pior que pode ter gente que confia nos formatos antigos
<LI><span class="a">20:51 Aurelio:</span> bem, mas já taav quebrado mesmo...
</UL>

<H3 ID="toc10"><a href="#toc10">A luta com a zzloteria começou às 19h30</a></H3>

<UL>
<LI><span class="a">21:05 Aurelio:</span> eu tou roubando na loteria ;)
<LI><span class="t">21:06 Thobias:</span> hahaha
<LI><span class="a">21:06 Aurelio:</span> entrego os pontos. não vai rolar o sedão mágico
<LI><span class="a">21:12 Aurelio:</span> tive que guardar o dump e pescar cada dado de uma vez, pois cada tipo de loteira o HTML é diferente
<LI><span class="a">21:12 Aurelio:</span> pelo menos é mais fail-proof
<LI><span class="t">21:13 Thobias:</span> bah, que bosta essa loteria hehe
<LI><span class="t">21:13 Thobias:</span> os caras da caixa querem complicar hehe
<LI><span class="a">21:14 Aurelio:</span> nem tanto, os dados tão tudo separadinho por | num tripona, mas cada loteria traz eles numa ordem diferente: <A HREF="http://www1.caixa.gov.br/loterias/loterias/quina/quina_pesquisa.asp">http://www1.caixa.gov.br/loterias/loterias/quina/quina_pesquisa.asp</A>  (veja o source, facinho)
<LI><span class="t">21:16 Thobias:</span> saquei. foda é ter um filtro para cada tipo de loteria
</UL>

<H3 ID="toc11"><a href="#toc11">A decisão de aposentar uma função</a></H3>

<UL>
<LI><span class="t">21:41 Thobias:</span> tem um rolo na whoisbr
<LI><span class="t">21:41 Thobias:</span> nao sei como vai funcionar ai
<LI><span class="a">21:41 Aurelio:</span> manda que eu testo
<LI><span class="t">21:42 Thobias:</span> na verdade só mudou o método. de GET para post e o negocio agora é https. ai ta dando esse rolo no lynx
<LI><span class="t">21:43 Thobias:</span> para resolver tive que adicionar a seguinte linha no /etc/lynx.cfg 
<LI><span class="t">21:43 Thobias:</span> FORCE_SSL_PROMPT:yes
<LI><span class="t">21:43 Thobias:</span> ei funciona
<LI><span class="t">21:43 Thobias:</span> s/ei/ai/
<LI><span class="a">21:43 Aurelio:</span> ssl sux, nao é em todo lugar que funciona
<LI><span class="t">21:44 Thobias:</span> bom, se souber de algum site que pega global...
<LI><span class="a">21:45 Aurelio:</span> eu lembro de ter lido uma noticia que os dados do .br foram replicados pros whois normais
<LI><span class="t">21:48 Thobias:</span> é verdade. ta funcionando em whois normais o br
<LI><span class="t">21:49 Thobias:</span> blz, vou alterar a função então... zzwhois
<LI><span class="a">22:02 Aurelio:</span> aqui tem o comando whois, no linux tb tem?
<LI><span class="t">22:04 Thobias:</span> tem, mas acho que é um pacote separado... 
<LI><span class="a">22:05 Aurelio:</span> que eu nunca tinha feito zzwhois pq já tinha o comando, e fiz a whoisbr pq não tinha br no comando. agora tem...
<LI><span class="a">22:06 Aurelio:</span> de repente era mais jogo aposentá-la (caso você ainda não tenha feito, é claro) :)
<LI><span class="t">22:16 Thobias:</span> não fiz a funcao, tava procurando um site ainda. achei esse aqui, parece que eh legal <A HREF="http://www.domaintools.com">http://www.domaintools.com</A>
<LI><span class="a">22:17 Aurelio:</span> se não fez vamos aposentar então, ou deixar no fim da fila
<LI><span class="t">22:20 Thobias:</span> ok
</UL>

<H3 ID="toc12"><a href="#toc12">Agora é a vez da luta com a zzletrademusica</a></H3>

<UL>
<LI><span class="t">22:23 Thobias:</span> a letrademusica tem um patch na lista
<LI><span class="a">22:23 Aurelio:</span> opa
<LI><span class="t">22:23 Thobias:</span> do elias junior
<LI><span class="t">22:24 Thobias:</span> vou testar, o patch é de fevereiro hehe
<LI><span class="a">22:24 Aurelio:</span> vix hehe
<LI><span class="a">22:56 Aurelio:</span> caralho, finalmente terminei essa zzloteria mala
<LI><span class="t">23:24 Thobias:</span> pow, to tomando um pau para a letrademusica
<LI><span class="a">23:25 Aurelio:</span> hehe, a gente tá ficando enferrujado :)
<LI><span class="t">23:25 Thobias:</span> pois é. não consigo fazer a pesquisa via lynx no site hehe
<LI><span class="a">23:26 Aurelio:</span> nem via post? deve ter trava ou ser js
<LI><span class="t">23:26 Thobias:</span> sei lá. é um formulário bem simples (eu acho jehe)
<LI><span class="a">23:26 Aurelio:</span> passa o link
<LI><span class="t">23:27 Thobias:</span> echo "?a=search_quick&amp;l=song&amp;s=kkk+took" | $ZZWWWDUMP '<A HREF="http://search.letssingit.com/cgi-exe/am.cgi#p">http://search.letssingit.com/cgi-exe/am.cgi#p</A>'
<LI><span class="t">23:27 Thobias:</span> o endereco da página é <A HREF="http://search.letssingit.com/quick_form">http://search.letssingit.com/quick_form</A>
</UL>

<H3 ID="toc13"><a href="#toc13">As mudanças são passadas ao vivo e já aplicadas nos fontes</a></H3>

<UL>
<LI><span class="t">23:30 Thobias:</span> ipinternet mudar o filtro para sed -n 's/^ *\([0-9]\{1,3\}\.[^ ]*\) */IP: \1/p'
<LI><span class="t">23:31 Thobias:</span> security mandriva muda a url para <A HREF="http://www.mandriva.com/en/rss/feed/security">http://www.mandriva.com/en/rss/feed/security</A>
<LI><span class="t">23:32 Thobias:</span> security conectiva nos sed do cl9 e cl10 adicionar esse comando ;s/   */ - /'
<LI><span class="t">23:32 Thobias:</span> fica assim: $ZZWWWDUMP "$URL$CNC9" | sed '/^ *200[0-9]-[0-1][0-9]-[0-3][0-9]/!d;s/^ *//;s/   */ - /' | $limite 
</UL>

<H3 ID="toc14"><a href="#toc14">A decisão de deixar como está: quebrada</a></H3>

<UL>
<LI><span class="a">23:33 Aurelio:</span> esse site das letras deve tar checando o referrer pra evitar robôs tipo a zz de usar
<LI><span class="t">23:34 Thobias:</span> bom. vamos deixar quebrada por enquanto...
<LI><span class="a">23:34 Aurelio:</span> sábia decisão :)
<LI><span class="t">23:34 Thobias:</span> hehehe
</UL>

<H3 ID="toc15"><a href="#toc15">Além dos problemas normais, o Skype também nos deu trabalho</a></H3>

<UL>
<LI><span class="a">23:39 Aurelio:</span> o skype cortou, mas tem varios espaços depois do nome do pacote
<LI><span class="t">23:40 Thobias:</span> entre o nome do pacote e a descrição?
<LI><span class="a">23:40 Aurelio:</span> isso
<LI><span class="t">23:40 Thobias:</span> ue, aquele sed que eu falei era para justamete casar ali e trocar por um  -
<LI><span class="t">23:41 Thobias:</span> ;s/   */ - /'
<LI><span class="a">23:41 Aurelio:</span> o skype cortou o espaço extra da ER
<LI><span class="t">23:41 Thobias:</span> no final do filtro
<LI><span class="a">23:41 Aurelio:</span> aqui apareceu somente   s/&lt;espaco&gt;&lt;asterisco&gt;/ - /
<LI><span class="a">23:42 Aurelio:</span> agora botei 3 espaços e foi
<LI><span class="t">23:42 Thobias:</span> ah. ok s/&lt;espaco&gt;&lt;espaco&gt;&lt;espaco&gt;*/ - /
</UL>

<H3 ID="toc16"><a href="#toc16">Uma parcial do que foi feito até agora em cinco horas de trabalho</a></H3>

<UL>
<LI><span class="a">23:45 Aurelio:</span> so far, so good
<LI><span class="a">23:45 Aurelio:</span>
    <br># 20061113 &lt;&gt; dicabl: URL e filtro atualizados (valeu sartini)
    <br>#          &lt;&gt; loteria: URL e filtro atualizados (valeu casali)
    <br>#          &lt;&gt; ipinternet: filtro atualizado
    <br>#          &lt;&gt; locale: URL e filtros atualizados
    <br>#          &lt;&gt; security: URL e filtro atualizados para conectiva e mandriva
<LI><span class="t">23:48 Thobias:</span> cool
</UL>

<H3 ID="toc17"><a href="#toc17">Páginas mudam, padrões mudam, as ZZ mudam</a></H3>

<UL>
<LI><span class="t">23:48 Thobias:</span> zzhowto
<LI><span class="t">23:49 Thobias:</span> no filtro
<LI><span class="t">23:49 Thobias:</span> $ZZWWWHTML "$URL" | sed -n '/alt="\[TXT\]"/{ s/^.*href="\([^"]*\).*/\1/;p;}' &gt; $arq ; echo ' feito!' ; }
<LI><span class="t">23:49 Thobias:</span> o original tá pegando ALT e HREF, os caras trocaram para minusculas...
<LI><span class="t">23:50 Thobias:</span> dá para deixar um [aA][lL][tT] e [hH][rR][eE][fF] ...
<LI><span class="a">23:51 Aurelio:</span> okie
<LI><span class="a">23:53 Aurelio:</span> deixei minusculas mesmo, que é o padrao do xhtml. tags em maiusculas é passado
<LI><span class="t">23:53 Thobias:</span> blz, nao sabia
</UL>

<H3 ID="toc18"><a href="#toc18">Mas padrões novos também podem facilitar nossa vida</a></H3>

<UL>
<LI><span class="a">23:54 Aurelio:</span> zznoticiaslinux i    arrumado
<LI><span class="t">23:54 Thobias:</span> vou pegar a linuxnews
<LI><span class="t">23:55 Thobias:</span> nessas agora de noticas vamos tentar trocar aqueles filtros loucos para RSS da vida
<LI><span class="t">23:55 Thobias:</span> ai no maximo precisaremos no futuro trocar a url
<LI><span class="t">23:55 Thobias:</span> como o caso do mandriva hoje
<LI><span class="a">23:56 Aurelio:</span> pode crer
</UL>

<H3 ID="toc19"><a href="#toc19">E virou a meia-noite...</a></H3>

<H3 ID="toc20"><a href="#toc20">RSS zipado? Putz, mais um problema para a coleção...</a></H3>

<UL>
<LI><span class="a">00:08 Aurelio:</span> noticiaslinux u OK
<LI><span class="t">00:09 Thobias:</span> foda que os caras estao publicando o arquivo rss zipado :(
<LI><span class="a">00:09 Aurelio:</span> aqui o lynx se garantiu
<LI><span class="t">00:09 Thobias:</span> tenta um $ZZWWWHTML
<LI><span class="t">00:09 Thobias:</span> $ZZWWWHTML <A HREF="http://osnews.com/files/recent.xml">http://osnews.com/files/recent.xml</A>
<LI><span class="a">00:10 Aurelio:</span> aqui rolou
<LI><span class="t">00:11 Thobias:</span>
    <br>$ $ZZWWWDUMP <A HREF="http://osnews.com/files/recent.xml">http://osnews.com/files/recent.xml</A> &gt; /tmp/X
    <br>$ file /tmp/X
    <br>/tmp/X: gzip compressed data, from Unix
<LI><span class="a">00:11 Aurelio:</span> linux sux :P
<LI><span class="t">00:12 Thobias:</span> hehe
<LI><span class="t">00:12 Thobias:</span> pode ser a versao do lynx de repente
<LI><span class="t">00:12 Thobias:</span>
    <br>lynx --version
    <br>Lynx Version 2.8.5rel.1 (04 Feb 2004)
    <br>libwww-FM 2.14, SSL-MM 1.4.1, GNUTLS 1.0.16
    <br>Built on linux-gnu May 13 2006 08:12:44
<LI><span class="a">00:12 Aurelio:</span>
    <br>$ $ZZWWWDUMP <A HREF="http://osnews.com/files/recent.xml">http://osnews.com/files/recent.xml</A> &gt; /tmp/X
    <br>$ file /tmp/X
    <br>/tmp/X: XML document text
    <br>$ lynx --version
    <br>Lynx Version 2.8.5rel.1 (04 Feb 2004)
    <br>Built on darwin7.9.0 Sep 29 2005 21:49:53
<LI><span class="a">00:12 Aurelio:</span> nope
</UL>

<H3 ID="toc21"><a href="#toc21">Mais um exemplo de patches "ao vivo"</a></H3>

<UL>
<LI><span class="t">00:17 Thobias:</span> zzlinuxnews ok
<LI><span class="t">00:17 Thobias:</span> slashdot filtro:
<LI><span class="t">00:17 Thobias:</span> sed -n '/&lt;div class="title"&gt;/,/&lt;\/div&gt;/{/slashdot/{ s/&lt;[^&gt;]*&gt;//g;s/^[[:blank:]]*//;p;};}' | $limite;}
<LI><span class="t">00:18 Thobias:</span> osnews filtro e o tipo de dump: agora é ZZWWWDUMP e o filtro é:
<LI><span class="t">00:18 Thobias:</span> sed -n '/By/{g;s/^ *//;p;};h' | $limite; }
<LI><span class="t">00:19 Thobias:</span> ops. filtro melhor para o osnews
<LI><span class="t">00:19 Thobias:</span> sed -n '/^ *By /{g;s/^ *//;p;};h' | $limite; }
<LI><span class="t">00:21 Thobias:</span> sem agradecimentos tb
<LI><span class="a">00:22 Aurelio:</span> ok. ok.
</UL>

<H3 ID="toc22"><a href="#toc22">Acha que o ritmo já está forte? Veja agora então:</a></H3>

<UL>
<LI><span class="t">00:27 Thobias:</span> zzsigla fix filtro tb
<LI><span class="t">00:27 Thobias:</span> sed -n 's/^ *//;s/^.*\* *//;s/ *search Amazon.*//p'
<LI><span class="a">00:28 Aurelio:</span> tou na dominiopais
<LI><span class="t">00:29 Thobias:</span> ok. filtro para zzsigla, tinha um lixo no final das primeiras linhas
<LI><span class="t">00:30 Thobias:</span> sed -n 's/^ *//;s/^.*\* *//;s/more info from .*//;s/ *search Amazon.*//p'
<LI><span class="t">00:30 Thobias:</span> vou para noticiaslinux
<LI><span class="a">00:36 Aurelio:</span> dominiopais e sigla OK
<LI><span class="a">00:37 Aurelio:</span> vou pra dicasl
<LI><span class="a">00:41 Aurelio:</span> dicasl OK
<LI><span class="t">00:41 Thobias:</span> zznoticiaslinux ok
<LI><span class="t">00:42 Thobias:</span> viva o linux mudou o filtro
<LI><span class="t">00:42 Thobias:</span> e o método
<LI><span class="t">00:42 Thobias:</span>
    <br>echo ; echozz "* Viva o Linux ($URL):"; $ZZWWWHTML $URL/index.rdf |
    <br>sed -n '1,/&lt;item&gt;/d;s@.*&lt;title&gt;\(.*\)&lt;/title&gt;@\1@p' | $limite ; }
</UL>

<H3 ID="toc23"><a href="#toc23">Ops, única trombada da noite, mas que acabou bem</a></H3>

<UL>
<LI><span class="t">00:42 Thobias:</span> under Linux, mudou o site e o filtro
<LI><span class="t">00:42 Thobias:</span>
    <br>[ "$s" != "${s#*u}" ] &amp;&amp; { URL='<A HREF="http://under-linux.org/">http://under-linux.org/</A>'
    <br>echo ; echozz "* UnderLinux ($URL):"; $ZZWWWHTML "$URL" |
    <br>sed -n '/class="entry-title/{s/&lt;[^&gt;]*&gt;//g;s/^[[:blank:]]*//;p;}'|$limite;}
<LI><span class="t">00:42 Thobias:</span> acho que mudou o método também...
<LI><span class="a">00:43 Aurelio:</span> esse eu já tinha feito :)
<LI><span class="a">00:43 Aurelio:</span>
    <br>[ "$s" != "${s#*u}" ] &amp;&amp; { URL='<A HREF="http://under-linux.org/feed/atom/">http://under-linux.org/feed/atom/</A>'
    <br>echo ; echozz "* UnderLinux ($URL):"; $ZZWWWHTML "$URL" |
    <br>sed -n 's,.*&lt;title .*\[\(.*\)]]&gt;&lt;/title&gt;.*,\1,p' | $limite; }
<LI><span class="t">00:43 Thobias:</span> achei que tu tinha feito o da info?
<LI><span class="t">00:44 Thobias:</span> ah, o atom vem zipado para mim....
<LI><span class="t">00:44 Thobias:</span> vai dar rolo com alguns usuarios...
<LI><span class="a">00:44 Aurelio:</span> então vou usar o teu
<LI><span class="a">00:44 Aurelio:</span> viu, não foi perdido :)
<LI><span class="t">00:44 Thobias:</span> :)
</UL>

<H3 ID="toc24"><a href="#toc24">Compatibilidade é importante (e difícil, e chato, e …)</a></H3>

<UL>
<LI><span class="a">00:47 Aurelio:</span> o noticias linux funciona aí? (aqui nao)
<LI><span class="t">00:47 Thobias:</span> funciona
<LI><span class="a">00:48 Aurelio:</span> sed: 1: "/&lt;[hH]3&gt;/{s/&lt;[^&gt;]*&gt;//g; ...": extra characters at the end of p command
<LI><span class="a">00:48 Aurelio:</span> BSDzisses
<LI><span class="t">00:48 Thobias:</span> da pera pegar daqui entao <A HREF="http://www.noticiaslinux.com.br/rss.php">http://www.noticiaslinux.com.br/rss.php</A>
<LI><span class="a">00:48 Aurelio:</span> nem esquenta, é o sed, vou arrumar
<LI><span class="a">00:49 Aurelio:</span> ah, só faltou o ; antes do }
<LI><span class="t">00:50 Thobias:</span> é mesmo hehe
<LI><span class="a">00:55 Aurelio:</span> noticiaslinux n OK
<LI><span class="a">00:55 Aurelio:</span> no BSD não rola [\t]  tb
<LI><span class="t">00:56 Thobias:</span> tem o [[:blank:]] ?
<LI><span class="a">00:56 Aurelio:</span> tem. bem lembrado
</UL>

<H3 ID="toc25"><a href="#toc25">Google é legal, mas o HTML deles…</a></H3>

<UL>
<LI><span class="a">01:12 Aurelio:</span> putz, essa zzgoogle não tou afim de fazer. se você não fizer, lanço o release sem ela mesmo :)
<LI><span class="t">01:12 Thobias:</span> ta quase
<LI><span class="t">01:13 Thobias:</span> bah, que zona aquele html
<LI><span class="a">01:17 Aurelio:</span> total, eu lembro que foi foda fazer a original
<LI><span class="t">01:19 Thobias:</span> acho que deu
<LI><span class="t">01:20 Thobias:</span> não ficou muito bonito, mas....
<LI><span class="t">01:20 Thobias:</span> só mudou o filtro
    <br>sed '/&lt;p class=g&gt;/!d;s/class=l/&amp;\
    <br>/g' | sed -n 's/&lt;\/a&gt;.*//;/&lt;\/script&gt;/d;s/.*href="\([^"]*\)"&gt;\(.*\)/\2\
    <br>\1\
    <br>/p' | sed 's/&lt;[^&gt;]*&gt;//g'
<LI><span class="a">01:23 Aurelio:</span> massa, fechou
</UL>

<H3 ID="toc26"><a href="#toc26">Já que chegamos até aqui, uma função nova seria legal</a></H3>

<UL>
<LI><span class="a">01:24 Aurelio:</span> que tal botar uma funcao nova? aquela que o carinha mandou
    <br># <S>------------------------------------------------------------------------</S>
    <br># Conversão de telefones contendo palavras para apenas números
    <br># Uso: zzfonenum [telefone]
    <br>#
    <br># Ex.: zzfonenum 3937-LINUX
    <br># Saída: 3937-54689
    <br># <S>------------------------------------------------------------------------</S>
<LI><span class="a">01:24 Aurelio:</span> essa nao tem o que dar errado :)
<LI><span class="t">01:25 Thobias:</span> massa, pode ser
<LI><span class="t">01:28 Thobias:</span> e o exemplo, acho que seria melhor colocar o echo 3937-LINUX | zzfonenum
<LI><span class="a">01:28 Aurelio:</span> vou melhorar o codigo pra ela funcionar dos dois jeitos
<LI><span class="a">01:32 Aurelio:</span>
    <br>$ ./dev zzfonenum 234-acde
    <br>234-2233
    <br>$ echo 234-acde | ./dev zzfonenum
    <br>234-2233
<LI><span class="t">01:33 Thobias:</span> cool
</UL>

<H3 ID="toc27"><a href="#toc27">A escolha do nome é muito importante</a></H3>

<UL>
<LI><span class="a">01:35 Aurelio:</span> falta um nome melhor...
<LI><span class="a">01:36 Aurelio:</span> zzfoneletra   zzletrafone
<LI><span class="t">01:36 Thobias:</span> mmm
<LI><span class="t">01:36 Thobias:</span> acho que zzfoneletra
<LI><span class="a">01:37 Aurelio:</span> agree
<LI><span class="t">01:37 Thobias:</span> o fone vindo primeiro lembra o telefone, o outro pode ficar meio estranho
</UL>

<H3 ID="toc28"><a href="#toc28">Ufa! Anotou a placa daquele trem?</a></H3>

<UL>
<LI><span class="a">01:39 Aurelio:</span> cara, por mim fechou o release entao
<LI><span class="t">01:39 Thobias:</span> como ficou o changelog?
<LI><span class="a">01:40 Aurelio:</span> ah, tem o bug da nomefoto
<LI><span class="a">01:40 Aurelio:</span>
    <br># 20061114 &lt;&gt; dicabl: URL e filtro atualizados (valeu sartini)
    <br>#          &lt;&gt; loteria: URL e filtro atualizados (valeu casali)
    <br>#          &lt;&gt; ipinternet: filtro atualizado
    <br>#          &lt;&gt; locale: URL e filtros atualizados
    <br>#          &lt;&gt; howto: filtro atualizado
    <br>#          &lt;&gt; security: URL e filtro atualizados para conectiva e mandriva
    <br>#          &lt;&gt; noticiaslinux: I) URL atualizada (valeu aires)
    <br>#          &lt;&gt; noticiaslinux: U) URL e filtro atualizados
    <br>#          &lt;&gt; noticiaslinux: V) filtro atualizado
    <br>#          &lt;&gt; noticiaslinux: N) filtro atualizado
    <br>#          &lt;&gt; linuxnews: S) filtro atualizado, O) filtro atualizado
    <br>#          &lt;&gt; dominiopais: URL e filtro atualizados
    <br>#          &lt;&gt; sigla: filtro atualizado
    <br>#          &lt;&gt; dicasl: URL e filtro atualizados
    <br>#          &lt;&gt; dolar: filtro atualizado
    <br>#          &lt;&gt; dicportugues: filtro atualizado
    <br>#          &lt;&gt; pronuncia: agora usa o comando 'say' no mac
    <br>#          &lt;&gt; google: filtro atualizado
    <br>#          ++ zzfoneletra (valeu rodolfo)
<LI><span class="a">01:40 Aurelio:</span> meu caralho
<LI><span class="t">01:40 Thobias:</span> esse ai é sério. pode fazer os caras perderem arquivos :(
<LI><span class="t">01:40 Thobias:</span> bah, que animal!! hehe
<LI><span class="a">01:40 Aurelio:</span> tb, tamos aqui desde as 19h
<LI><span class="a">01:40 Aurelio:</span> 18h30
<LI><span class="a">01:41 Aurelio:</span> 7h de zz já, acredita?
<LI><span class="t">01:41 Thobias:</span> foi legal! passou rápido essas 7h
<LI><span class="a">01:41 Aurelio:</span> meu, essa session foi animal!
<LI><span class="a">01:41 Aurelio:</span> muito no gás mesmo
<LI><span class="t">01:42 Thobias:</span> foi bom "relembrar" hehehe
<LI><span class="a">01:42 Aurelio:</span> vou postar algo no blog sobre isso que foi histórico :)
<LI><span class="t">01:43 Thobias:</span> 7h de programação insana de puro shell heheh
</UL>

<H3 ID="toc29"><a href="#toc29">Análise do problema e das possíveis soluções</a></H3>

<UL>
<LI><span class="a">01:47 Aurelio:</span> mas o que fazer qdo existir o arquivo
<LI><span class="a">01:47 Aurelio:</span> abortar ou adicionar uma extensão numerica pra diferenciar?
<LI><span class="t">01:47 Thobias:</span> acho que não faz nada e manda uma mesg na tela
<LI><span class="a">01:48 Aurelio:</span> o foda é que daí ele vai ter trocado o nome de metade da galera já
<LI><span class="a">01:48 Aurelio:</span> bem, mas é o melhor. dar uma passada só pra checar vai ser sux
</UL>

<H3 ID="toc30"><a href="#toc30">A tomada de decisão e implementação</a></H3>

<UL>
<LI><span class="t">01:54 Thobias:</span> mas na boa, acho que o melhor mesmo é não mover, imprime dizendo que o arquivo destino ja existe e pronto
<LI><span class="a">01:54 Aurelio:</span> pode crer, aborta no meio do caminho e o cara decide o que fazer
<LI><span class="t">01:55 Thobias:</span> e podemos deixar a dica neste caso do cara rodar 2x para contornar o "problema"
<LI><span class="a">02:00 Aurelio:</span>
    <br>$ ../dev zznomefoto -p videos- *.wmv
    <br>a.wmv -&gt; videos-001.wmv
    <br>Arquivo videos-001.wmv já existe. Abortando.
    <br>$
<LI><span class="t">02:01 Thobias:</span> blz, é isso aí. evita do cara perder os arquivos e deixa a decisão do que fazer como ele
</UL>

<H3 ID="toc31"><a href="#toc31">Quase oito horas depois… finalmente terminou</a></H3>

<UL>
<LI><span class="a">02:05 Aurelio:</span> blz, então agora é oficial, FECHOU
<LI><span class="a">02:05 Aurelio:</span> amanhã eu lanço, faço um post no blog e vou até anunciar no br-linux
<LI><span class="t">02:05 Thobias:</span> blz
<LI><span class="t">02:06 Thobias:</span> "que pegada" :)
<LI><span class="a">02:06 Aurelio:</span> pode crer. agora só em 2007 ;)
<LI><span class="t">02:07 Thobias:</span> :)
</UL>

<H3 ID="toc32"><a href="#toc32">Minutos depois…</a></H3>

<UL>
<LI><span class="t">02:32 Thobias:</span> pow, que putaria ta dando na globo
<LI><span class="a">02:32 Aurelio:</span> opa
<LI><span class="a">02:33 Aurelio:</span> droga, perdi
</UL>

</div></div><!-- #content, #body -->
<div id="footer">
<P>
<A HREF="https://github.com/funcoeszz/website/blob/master/aovivo.t2t">Edite esta página no GitHub</A>
</P>
</div>
<a class="cabecao" href="http://aurelio.net" title="AURELIO.NET — Organizações Verde Inc.™" alt="AURELIO.NET — Organizações Verde Inc.™"><img src="http://aurelio.net/include/10anos/aureliolga.jpg"></a>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-280222-4";
urchinTracker();
</script>

</DIV>

<!-- html code generated by txt2tags 2.6.1087 (http://txt2tags.org) -->
<!-- cmdline: txt2tags aovivo.t2t -->
</BODY></HTML>
